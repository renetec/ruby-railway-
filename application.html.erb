<!DOCTYPE html>
<html>
  <head>
    <title><%= content_for?(:title) ? "#{yield(:title)} | LeClub" : "LeClub Community Hub" %></title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description" content="<%= content_for?(:description) ? yield(:description) : t('meta.default_description') %>">
    
    <!-- Performance Optimizations -->
    <meta name="theme-color" content="#00d4ff">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Critical Resource Hints -->
    <link rel="prefetch" href="<%= asset_path('application.css') %>">
    
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    <!-- Async CSS loading for non-critical styles -->
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload", media: "all" %>
    <%= javascript_importmap_tags %>
    
    <!-- Critical CSS to prevent FOUC -->
    <style>
      /* Prevent flash of unstyled content - More aggressive approach */
      * { box-sizing: border-box; margin: 0; padding: 0; }
      
      body { 
        visibility: hidden; 
        opacity: 0;
        font-family: system-ui, -apple-system, sans-serif;
        background-color: #f9fafb;
        color: #111827;
      }
      
      /* Critical layout styles */
      .max-w-6xl { max-width: 72rem; }
      .mx-auto { margin-left: auto; margin-right: auto; }
      .px-4 { padding-left: 1rem; padding-right: 1rem; }
      .py-8 { padding-top: 2rem; padding-bottom: 2rem; }
      .grid { display: grid; }
      .grid-cols-1 { grid-template-columns: repeat(1, minmax(0, 1fr)); }
      .gap-6 { gap: 1.5rem; }
      .text-center { text-align: center; }
      .mb-8 { margin-bottom: 2rem; }
      .mb-4 { margin-bottom: 1rem; }
      .text-3xl { font-size: 1.875rem; line-height: 2.25rem; }
      .font-bold { font-weight: 700; }
      .text-lg { font-size: 1.125rem; line-height: 1.75rem; }
      .bg-white { background-color: #ffffff; }
      .border { border-width: 1px; }
      .border-gray-200 { border-color: #e5e7eb; }
      .rounded-lg { border-radius: 0.5rem; }
      .p-4 { padding: 1rem; }
      .shadow-sm { box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
      
      @media (min-width: 768px) {
        .md\:grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
      }
      
      /* Dark mode critical styles */
      html.dark body { 
        background-color: #1f2937; 
        color: #f9fafb; 
      }
      html.dark .bg-white { 
        background-color: #374151; 
      }
      html.dark .border-gray-200 { 
        border-color: #4b5563; 
      }
      
      .page-loaded { 
        visibility: visible !important; 
        opacity: 1 !important; 
        transition: opacity 0.2s ease-in-out; 
      }
    </style>
    
    <!-- Modern 2025 Design System -->
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap');
      @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap');
      
      :root {
        /* 2025 Advanced Color System */
        --color-primary-50: #f0f9ff;
        --color-primary-100: #e0f2fe;
        --color-primary-200: #bae6fd;
        --color-primary-300: #7dd3fc;
        --color-primary-400: #38bdf8;
        --color-primary-500: #0ea5e9;
        --color-primary-600: #0284c7;
        --color-primary-700: #0369a1;
        --color-primary-800: #075985;
        --color-primary-900: #0c4a6e;
        
        /* Semantic Colors */
        --color-success: #10b981;
        --color-warning: #f59e0b;
        --color-error: #ef4444;
        --color-info: #3b82f6;
        
        /* Neutral Palette */
        --color-neutral-0: #ffffff;
        --color-neutral-50: #fafafa;
        --color-neutral-100: #f5f5f5;
        --color-neutral-200: #e5e5e5;
        --color-neutral-300: #d4d4d4;
        --color-neutral-400: #a3a3a3;
        --color-neutral-500: #737373;
        --color-neutral-600: #525252;
        --color-neutral-700: #404040;
        --color-neutral-800: #262626;
        --color-neutral-900: #171717;
        --color-neutral-950: #0a0a0a;
        
        /* Advanced Glassmorphism 2.0 */
        --glass-surface-1: rgba(255, 255, 255, 0.05);
        --glass-surface-2: rgba(255, 255, 255, 0.08);
        --glass-surface-3: rgba(255, 255, 255, 0.12);
        --glass-border-1: rgba(255, 255, 255, 0.1);
        --glass-border-2: rgba(255, 255, 255, 0.15);
        --glass-border-3: rgba(255, 255, 255, 0.2);
        --glass-shadow-sm: 0 4px 16px rgba(0, 0, 0, 0.12);
        --glass-shadow-md: 0 8px 32px rgba(0, 0, 0, 0.16);
        --glass-shadow-lg: 0 16px 64px rgba(0, 0, 0, 0.24);
        --glass-blur-sm: blur(8px);
        --glass-blur-md: blur(16px);
        --glass-blur-lg: blur(24px);
        
        /* 3D Lighting System */
        --shadow-soft-sm: 0 2px 8px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.06);
        --shadow-soft-md: 0 4px 16px rgba(0, 0, 0, 0.08), 0 2px 4px rgba(0, 0, 0, 0.08);
        --shadow-soft-lg: 0 8px 32px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.12);
        --shadow-soft-xl: 0 16px 64px rgba(0, 0, 0, 0.16), 0 8px 16px rgba(0, 0, 0, 0.16);
        
        /* Advanced Typography Scale */
        --font-family-primary: 'Inter', system-ui, -apple-system, sans-serif;
        --font-family-display: 'Plus Jakarta Sans', sans-serif;
        --font-family-mono: 'Space Grotesk', monospace;
        
        --font-size-xs: clamp(0.75rem, 0.7rem + 0.2vw, 0.8rem);
        --font-size-sm: clamp(0.875rem, 0.8rem + 0.3vw, 0.95rem);
        --font-size-base: clamp(1rem, 0.9rem + 0.4vw, 1.1rem);
        --font-size-lg: clamp(1.125rem, 1rem + 0.5vw, 1.25rem);
        --font-size-xl: clamp(1.25rem, 1.1rem + 0.6vw, 1.4rem);
        --font-size-2xl: clamp(1.5rem, 1.3rem + 0.8vw, 1.75rem);
        --font-size-3xl: clamp(1.875rem, 1.6rem + 1vw, 2.25rem);
        --font-size-4xl: clamp(2.25rem, 1.9rem + 1.4vw, 3rem);
        --font-size-5xl: clamp(3rem, 2.5rem + 2vw, 4rem);
        --font-size-6xl: clamp(3.75rem, 3rem + 3vw, 5.5rem);
        
        /* Spacing System */
        --space-px: 1px;
        --space-0-5: 0.125rem;
        --space-1: 0.25rem;
        --space-1-5: 0.375rem;
        --space-2: 0.5rem;
        --space-2-5: 0.625rem;
        --space-3: 0.75rem;
        --space-3-5: 0.875rem;
        --space-4: 1rem;
        --space-5: 1.25rem;
        --space-6: 1.5rem;
        --space-7: 1.75rem;
        --space-8: 2rem;
        --space-9: 2.25rem;
        --space-10: 2.5rem;
        --space-11: 2.75rem;
        --space-12: 3rem;
        --space-14: 3.5rem;
        --space-16: 4rem;
        --space-20: 5rem;
        --space-24: 6rem;
        --space-28: 7rem;
        --space-32: 8rem;
        --space-36: 9rem;
        --space-40: 10rem;
        --space-44: 11rem;
        --space-48: 12rem;
        --space-52: 13rem;
        --space-56: 14rem;
        --space-60: 15rem;
        --space-64: 16rem;
        --space-72: 18rem;
        --space-80: 20rem;
        --space-96: 24rem;
        
        /* Border Radius Scale */
        --radius-none: 0;
        --radius-sm: 0.375rem;
        --radius-md: 0.5rem;
        --radius-lg: 0.75rem;
        --radius-xl: 1rem;
        --radius-2xl: 1.5rem;
        --radius-3xl: 2rem;
        --radius-4xl: 2.5rem;
        --radius-full: 9999px;
        
        /* Animation System */
        --duration-fast: 150ms;
        --duration-normal: 300ms;
        --duration-slow: 500ms;
        --duration-slower: 750ms;
        --ease-linear: linear;
        --ease-in: cubic-bezier(0.4, 0, 1, 1);
        --ease-out: cubic-bezier(0, 0, 0.2, 1);
        --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
        --ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
        --ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      /* Advanced Dark Mode Support */
      [data-theme="light"] {
        --bg-primary: var(--color-neutral-0);
        --bg-secondary: var(--color-neutral-50);
        --bg-tertiary: var(--color-neutral-100);
        --text-primary: var(--color-neutral-900);
        --text-secondary: var(--color-neutral-700);
        --text-tertiary: var(--color-neutral-500);
        --border-primary: var(--color-neutral-200);
        --border-secondary: var(--color-neutral-300);
        --glass-bg: rgba(255, 255, 255, 0.8);
        --glass-border: rgba(255, 255, 255, 0.2);
        
        /* 2025 Design Variables for Events/Posts Pages */
        --primary-bg: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        --secondary-bg: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
        --surface-bg: rgba(255, 255, 255, 0.9);
        --electric-blue: #06b6d4;
        --vibrant-purple: #8b5cf6;
        --emerald-green: #10b981;
        --warm-gold: #f59e0b;
      }

      [data-theme="dark"] {
        --bg-primary: var(--color-neutral-950);
        --bg-secondary: var(--color-neutral-900);
        --bg-tertiary: var(--color-neutral-800);
        --text-primary: var(--color-neutral-0);
        --text-secondary: var(--color-neutral-200);
        --text-tertiary: var(--color-neutral-400);
        --border-primary: var(--color-neutral-800);
        --border-secondary: var(--color-neutral-700);
        --glass-bg: rgba(255, 255, 255, 0.05);
        --glass-border: rgba(255, 255, 255, 0.1);
        
        /* 2025 Dark Mode Variables for Events/Posts Pages */
        --primary-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
        --secondary-bg: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        --surface-bg: rgba(30, 41, 59, 0.8);
        --electric-blue: #0ea5e9;
        --vibrant-purple: #a855f7;
        --emerald-green: #059669;
        --warm-gold: #d97706;
      }

      /* System Preference Detection */
      @media (prefers-color-scheme: dark) {
        :root:not([data-theme]) {
          --bg-primary: var(--color-neutral-950);
          --bg-secondary: var(--color-neutral-900);
          --bg-tertiary: var(--color-neutral-800);
          --text-primary: var(--color-neutral-0);
          --text-secondary: var(--color-neutral-200);
          --text-tertiary: var(--color-neutral-400);
          --border-primary: var(--color-neutral-800);
          --border-secondary: var(--color-neutral-700);
          --glass-bg: rgba(255, 255, 255, 0.05);
          --glass-border: rgba(255, 255, 255, 0.1);
          
          /* System Dark Mode Variables */
          --primary-bg: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
          --secondary-bg: linear-gradient(135deg, #1e293b 0%, #334155 100%);
          --surface-bg: rgba(30, 41, 59, 0.8);
          --electric-blue: #0ea5e9;
          --vibrant-purple: #a855f7;
          --emerald-green: #059669;
          --warm-gold: #d97706;
        }
      }

      @media (prefers-color-scheme: light) {
        :root:not([data-theme]) {
          --bg-primary: var(--color-neutral-0);
          --bg-secondary: var(--color-neutral-50);
          --bg-tertiary: var(--color-neutral-100);
          --text-primary: var(--color-neutral-900);
          --text-secondary: var(--color-neutral-700);
          --text-tertiary: var(--color-neutral-500);
          --border-primary: var(--color-neutral-200);
          --border-secondary: var(--color-neutral-300);
          --glass-bg: rgba(255, 255, 255, 0.8);
          --glass-border: rgba(255, 255, 255, 0.2);
          
          /* System Light Mode Variables */
          --primary-bg: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
          --secondary-bg: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);
          --surface-bg: rgba(255, 255, 255, 0.9);
          --electric-blue: #06b6d4;
          --vibrant-purple: #8b5cf6;
          --emerald-green: #10b981;
          --warm-gold: #f59e0b;
        }
      }
      
      /* 2025 Base Styles */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      
      html {
        font-size: 16px;
        scroll-behavior: smooth;
        scroll-padding-top: var(--space-16);
      }
      
      body {
        font-family: var(--font-family-primary);
        font-size: var(--font-size-base);
        line-height: 1.6;
        letter-spacing: -0.011em;
        color: var(--text-primary);
        background: var(--bg-primary);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
        min-height: 100vh;
        transition: color var(--duration-normal) var(--ease-out),
                    background-color var(--duration-normal) var(--ease-out);
      }
      
      /* Advanced Glassmorphism 2.0 Components */
      .glass-surface {
        background: var(--glass-bg);
        backdrop-filter: var(--glass-blur-md);
        -webkit-backdrop-filter: var(--glass-blur-md);
        border: 1px solid var(--glass-border);
        box-shadow: var(--glass-shadow-md);
      }
      
      .glass-surface-sm {
        background: var(--glass-surface-1);
        backdrop-filter: var(--glass-blur-sm);
        -webkit-backdrop-filter: var(--glass-blur-sm);
        border: 1px solid var(--glass-border-1);
        box-shadow: var(--glass-shadow-sm);
      }
      
      .glass-surface-lg {
        background: var(--glass-surface-3);
        backdrop-filter: var(--glass-blur-lg);
        -webkit-backdrop-filter: var(--glass-blur-lg);
        border: 1px solid var(--glass-border-3);
        box-shadow: var(--glass-shadow-lg);
      }
      
      /* Soft 3D Components */
      .soft-3d {
        background: var(--bg-primary);
        box-shadow: var(--shadow-soft-md);
        transform: translateZ(0);
        transition: all var(--duration-normal) var(--ease-out);
      }
      
      .soft-3d:hover {
        box-shadow: var(--shadow-soft-lg);
        transform: translateY(-2px) translateZ(0);
      }
      
      .inflated {
        background: linear-gradient(145deg, var(--bg-secondary), var(--bg-primary));
        box-shadow: 
          inset 4px 4px 8px rgba(0, 0, 0, 0.1),
          inset -4px -4px 8px rgba(255, 255, 255, 0.05),
          0 8px 16px rgba(0, 0, 0, 0.15);
        border-radius: var(--radius-2xl);
        transition: all var(--duration-normal) var(--ease-spring);
      }
      
      .inflated:hover {
        box-shadow: 
          inset 2px 2px 4px rgba(0, 0, 0, 0.1),
          inset -2px -2px 4px rgba(255, 255, 255, 0.05),
          0 12px 24px rgba(0, 0, 0, 0.2);
        transform: scale(1.02);
      }
      
      /* Modern Typography */
      .text-display {
        font-family: var(--font-family-display);
        font-weight: 700;
        letter-spacing: -0.025em;
        line-height: 1.2;
      }
      
      .text-mono {
        font-family: var(--font-family-mono);
        font-weight: 500;
      }
      
      /* Intelligent Micro-interactions */
      .micro-bounce {
        animation: microBounce 2s infinite;
      }
      
      .micro-float {
        animation: microFloat 3s ease-in-out infinite;
      }
      
      .micro-pulse {
        animation: microPulse 2s ease-in-out infinite;
      }
      
      @keyframes microBounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-4px); }
      }
      
      @keyframes microFloat {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-8px) rotate(1deg); }
      }
      
      @keyframes microPulse {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.8; transform: scale(1.02); }
      }
      
      /* Stunning Background Pattern */
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: 
          radial-gradient(circle at 20% 80%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
          radial-gradient(circle at 40% 40%, rgba(16, 185, 129, 0.05) 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
      }
      
      /* Sophisticated Typography */
      .font-display {
        font-family: 'Poppins', sans-serif;
        font-weight: 700;
        letter-spacing: -0.02em;
      }
      
      .font-content {
        font-family: 'Crimson Text', serif;
        font-weight: 400;
        line-height: 1.8;
      }
      
      /* Clean Background */
      
      /* Stunning Glassmorphism Navigation */
      .nav-modern {
        background: var(--glass-bg);
        backdrop-filter: var(--glass-blur);
        border-bottom: 1px solid var(--glass-border);
        box-shadow: var(--glass-shadow);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        z-index: 1000;
      }
      
      .nav-modern::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, 
          rgba(0, 212, 255, 0.1) 0%, 
          rgba(139, 92, 246, 0.1) 50%, 
          rgba(16, 185, 129, 0.1) 100%);
        opacity: 0;
        transition: opacity 0.3s ease;
        pointer-events: none;
      }
      
      .nav-modern.scrolled::before {
        opacity: 1;
      }
      
      /* Stunning Interactive Navigation Links */
      .nav-link {
        position: relative;
        padding: 12px 24px;
        border-radius: 12px;
        font-weight: 500;
        color: var(--text-secondary);
        text-decoration: none;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 0.875rem;
        letter-spacing: -0.006em;
        overflow: hidden;
      }
      
      .nav-link::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, var(--electric-blue) 0%, var(--vibrant-purple) 100%);
        border-radius: 12px;
        opacity: 0;
        transform: scale(0.8);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .nav-link::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.6s ease;
      }
      
      .nav-link:hover:not(.active)::before {
        opacity: 0.2;
        transform: scale(1);
      }
      
      .nav-link:hover:not(.active)::after {
        width: 100px;
        height: 100px;
      }
      
      .nav-link:hover:not(.active) {
        color: var(--text-primary);
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 212, 255, 0.3);
      }
      
      .nav-link.active {
        background: linear-gradient(135deg, var(--electric-blue) 0%, var(--vibrant-purple) 100%) !important;
        color: white !important;
        box-shadow: 0 8px 25px rgba(0, 212, 255, 0.4) !important;
        transform: translateY(-1px) !important;
      }
      
      .nav-link.active::before {
        opacity: 0.2 !important;
        transform: scale(1) !important;
      }
      
      .nav-link.active::after {
        display: none !important;
      }
      
      /* Compact Navigation Links */
      .nav-link-compact {
        position: relative;
        padding: 8px 12px;
        border-radius: 10px;
        font-weight: 500;
        color: var(--text-secondary);
        text-decoration: none;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 1.1rem;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 40px;
        height: 40px;
      }
      
      .nav-link-compact::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, var(--electric-blue) 0%, var(--vibrant-purple) 100%);
        border-radius: 10px;
        opacity: 0;
        transform: scale(0.8);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .nav-link-compact:hover::before {
        opacity: 0.15;
        transform: scale(1);
      }
      
      .nav-link-compact:hover {
        color: var(--text-primary);
        transform: translateY(-1px) scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 212, 255, 0.25);
      }
      
      .nav-link-compact.active {
        background: linear-gradient(135deg, var(--electric-blue) 0%, var(--vibrant-purple) 100%);
        color: var(--text-primary);
        box-shadow: 0 4px 15px rgba(0, 212, 255, 0.4);
        transform: translateY(-1px);
      }
      
      .nav-link-compact.active::before {
        display: none;
      }
      
      /* Stunning Glassmorphism Cards */
      .card-stunning {
        background: var(--glass-bg);
        backdrop-filter: var(--glass-blur);
        border: 1px solid var(--glass-border);
        border-radius: 24px;
        box-shadow: var(--glass-shadow);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }
      
      .card-stunning::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, var(--electric-blue), var(--vibrant-purple), var(--emerald-green));
        transform: scaleX(0);
        transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .card-stunning::after {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, 
          rgba(0, 212, 255, 0.1) 0%, 
          rgba(139, 92, 246, 0.1) 50%, 
          rgba(16, 185, 129, 0.1) 100%);
        opacity: 0;
        transition: opacity 0.5s ease;
        pointer-events: none;
      }
      
      .card-stunning:hover::before {
        transform: scaleX(1);
      }
      
      .card-stunning:hover::after {
        opacity: 1;
      }
      
      .card-stunning:hover {
        transform: translateY(-12px) scale(1.02);
        box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
        border-color: rgba(255, 255, 255, 0.3);
      }
      
      /* Bento Grid System */
      .bento-grid {
        display: grid;
        gap: var(--spacing-lg);
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      }
      
      .bento-card {
        background: var(--surface-primary);
        border: 1px solid var(--neutral-200);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-sm);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
      }
      
      .bento-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        border-color: var(--neutral-300);
      }
      
      .bento-card.size-2x {
        grid-column: span 2;
      }
      
      .bento-card.size-2y {
        grid-row: span 2;
      }
      
      /* Modern Button System */
      .btn-modern {
        position: relative;
        padding: var(--spacing-md) var(--spacing-xl);
        border: none;
        border-radius: var(--radius-lg);
        font-weight: 600;
        font-size: 0.875rem;
        letter-spacing: -0.006em;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-sm);
        line-height: 1.5;
      }
      
      .btn-primary {
        background: linear-gradient(135deg, var(--primary-500) 0%, var(--accent-500) 100%);
        color: white;
        box-shadow: var(--shadow-sm);
      }
      
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        color: white;
        text-decoration: none;
      }
      
      .btn-secondary {
        background: var(--surface-primary);
        color: var(--neutral-700);
        border: 1px solid var(--neutral-200);
        backdrop-filter: blur(12px);
      }
      
      .btn-secondary:hover {
        background: white;
        transform: translateY(-1px);
        box-shadow: var(--shadow-md);
        color: var(--primary-600);
        text-decoration: none;
        border-color: var(--neutral-300);
      }
      
      .btn-ghost {
        background: transparent;
        color: var(--neutral-600);
        border: 1px solid transparent;
      }
      
      .btn-ghost:hover {
        background: var(--surface-secondary);
        color: var(--neutral-800);
        border-color: var(--neutral-200);
      }
      
      /* Button Sizes */
      .btn-sm {
        padding: var(--spacing-sm) var(--spacing-lg);
        font-size: 0.8125rem;
      }
      
      .btn-lg {
        padding: var(--spacing-lg) var(--spacing-2xl);
        font-size: 1rem;
      }
      
      /* Hero Sections */
      .hero-modern {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
        backdrop-filter: blur(10px);
        border-radius: 32px;
        padding: 80px 40px;
        margin: 40px 0;
        position: relative;
        overflow: hidden;
      }
      
      .hero-modern::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(14, 165, 233, 0.05) 0%, transparent 70%);
        animation: float 6s ease-in-out infinite;
        z-index: -1;
      }
      
      @keyframes float {
        0%, 100% { transform: translate(0px, 0px) rotate(0deg); }
        33% { transform: translate(10px, -10px) rotate(1deg); }
        66% { transform: translate(-5px, 5px) rotate(-1deg); }
      }
      
      /* Sophisticated Typography */
      .text-gradient {
        background: linear-gradient(135deg, var(--primary-600) 0%, var(--accent-600) 50%, var(--primary-500) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-family: 'Space Grotesk', sans-serif;
        font-weight: 700;
      }
      
      .title-modern {
        font-family: 'Space Grotesk', sans-serif;
        font-size: clamp(2.25rem, 6vw, 4.5rem);
        font-weight: 700;
        line-height: 1.1;
        letter-spacing: -0.02em;
        margin-bottom: var(--spacing-lg);
      }
      
      .subtitle-modern {
        font-size: clamp(1.125rem, 2.5vw, 1.375rem);
        color: var(--neutral-600);
        margin-bottom: var(--spacing-2xl);
        line-height: 1.6;
        font-weight: 400;
      }
      
      /* Heading System */
      h1, h2, h3, h4, h5, h6 {
        font-family: 'Space Grotesk', sans-serif;
        font-weight: 600;
        letter-spacing: -0.015em;
        line-height: 1.3;
        margin-bottom: var(--spacing-md);
        color: var(--neutral-900);
      }
      
      h1 { font-size: 2.25rem; }
      h2 { font-size: 1.875rem; }
      h3 { font-size: 1.5rem; }
      h4 { font-size: 1.25rem; }
      h5 { font-size: 1.125rem; }
      h6 { font-size: 1rem; }
      
      /* Sophisticated Service Grid */
      .service-card {
        background: var(--surface-primary);
        backdrop-filter: blur(24px);
        border-radius: var(--radius-2xl);
        padding: var(--spacing-2xl) var(--spacing-xl);
        text-align: center;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid var(--neutral-200);
        position: relative;
        overflow: hidden;
        text-decoration: none;
      }
      
      .service-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, var(--primary-50) 0%, var(--accent-50) 100%);
        opacity: 0;
        transition: opacity 0.4s ease;
        z-index: -1;
      }
      
      .service-card:hover::before {
        opacity: 1;
      }
      
      .service-card:hover {
        transform: translateY(-6px);
        box-shadow: var(--shadow-xl);
        border-color: var(--neutral-300);
      }
      
      .service-icon {
        font-size: 2.5rem;
        margin-bottom: var(--spacing-lg);
        filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.1));
        transition: transform 0.3s ease;
      }
      
      .service-card:hover .service-icon {
        transform: scale(1.1) rotate(-5deg);
      }
      
      /* Microinteractions */
      .micro-bounce {
        animation: micro-bounce 2s ease-in-out infinite;
      }
      
      .micro-pulse {
        animation: micro-pulse 3s ease-in-out infinite;
      }
      
      .micro-float {
        animation: micro-float 4s ease-in-out infinite;
      }
      
      @keyframes micro-bounce {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-4px); }
      }
      
      @keyframes micro-pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
      }
      
      @keyframes micro-float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        33% { transform: translateY(-2px) rotate(1deg); }
        66% { transform: translateY(2px) rotate(-1deg); }
      }
      
      /* Sophisticated Stats Cards */
      .stat-card {
        background: var(--surface-primary);
        backdrop-filter: blur(24px);
        border-radius: var(--radius-2xl);
        padding: var(--spacing-2xl);
        text-align: center;
        border: 1px solid var(--neutral-200);
        box-shadow: var(--shadow-lg);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }
      
      .stat-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(90deg, var(--primary-500), var(--accent-500), var(--success-500), var(--warning-500));
      }
      
      .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-xl);
        border-color: var(--neutral-300);
      }
      
      .stat-number {
        font-family: 'Space Grotesk', sans-serif;
        font-size: 2.75rem;
        font-weight: 700;
        background: linear-gradient(135deg, var(--primary-600) 0%, var(--accent-600) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: var(--spacing-sm);
        letter-spacing: -0.02em;
      }
      
      .stat-label {
        color: var(--neutral-600);
        font-weight: 500;
        font-size: 0.875rem;
        letter-spacing: -0.006em;
        text-transform: uppercase;
      }
      
      /* Form Elements */
      .form-input {
        background: var(--surface-primary);
        border: 1px solid var(--neutral-300);
        border-radius: var(--radius-lg);
        padding: var(--spacing-md) var(--spacing-lg);
        font-size: 0.875rem;
        transition: all 0.3s ease;
        color: var(--neutral-800);
      }
      
      .form-input:focus {
        outline: none;
        border-color: var(--primary-500);
        box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
      }
      
      .form-label {
        font-weight: 500;
        color: var(--neutral-700);
        font-size: 0.875rem;
        margin-bottom: var(--spacing-sm);
        display: block;
      }
      
      /* Beautiful Animations */
      @keyframes slideInUp {
        from {
          transform: translateY(60px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
      
      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }
      
      .animate-slide-up {
        animation: slideInUp 0.6s ease-out forwards;
      }
      
      .animate-fade-in {
        animation: fadeIn 0.8s ease-out forwards;
      }
      
      /* SVG Fix */
      svg {
        max-width: 100%;
        height: auto;
        display: inline-block;
        vertical-align: middle;
      }
      
      /* 2025 Hero Section Enhancements */
      .hero-float-1, .hero-float-2, .hero-float-3 {
        animation: heroFloat 8s ease-in-out infinite;
      }
      
      @keyframes heroFloat {
        0%, 100% { transform: translate(0, 0) rotate(0deg); }
        25% { transform: translate(10px, -15px) rotate(1deg); }
        50% { transform: translate(-5px, 10px) rotate(-1deg); }
        75% { transform: translate(15px, 5px) rotate(0.5deg); }
      }
      
      /* Premium Hero Buttons */
      .btn-hero-primary {
        background: linear-gradient(135deg, var(--electric-blue) 0%, var(--vibrant-purple) 100%);
        position: relative;
        overflow: hidden;
        color: white;
        font-weight: 600;
        letter-spacing: -0.005em;
      }
      
      .btn-hero-primary::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.3) 0%, transparent 70%);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        pointer-events: none;
      }
      
      .btn-hero-primary:hover::before {
        width: 400px;
        height: 400px;
      }
      
      .btn-hero-primary:hover {
        box-shadow: 0 20px 40px rgba(0, 212, 255, 0.4);
        transform: translateY(-2px) scale(1.05);
      }
      
      .btn-hero-secondary {
        backdrop-filter: blur(20px);
        border: 1px solid var(--glass-border-2);
        background: var(--glass-surface-2);
        color: var(--text-primary);
        font-weight: 600;
        letter-spacing: -0.005em;
        position: relative;
        overflow: hidden;
      }
      
      .btn-hero-secondary::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: radial-gradient(circle, rgba(139, 92, 246, 0.2) 0%, transparent 70%);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.6s ease;
        pointer-events: none;
      }
      
      .btn-hero-secondary:hover::before {
        width: 400px;
        height: 400px;
      }
      
      .btn-hero-secondary:hover {
        background: var(--glass-surface-3);
        border-color: var(--glass-border-3);
        box-shadow: 0 15px 35px rgba(139, 92, 246, 0.2);
      }
      
      /* Hero Stats Cards */
      .stat-card-hero {
        background: var(--glass-surface-1);
        backdrop-filter: blur(16px);
        border-radius: 20px;
        border: 1px solid var(--glass-border-1);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }
      
      .stat-card-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, var(--electric-blue)/10 0%, var(--vibrant-purple)/10 50%, var(--emerald-green)/10 100%);
        opacity: 0;
        transition: opacity 0.4s ease;
      }
      
      .stat-card-hero:hover::before {
        opacity: 1;
      }
      
      .stat-card-hero:hover {
        transform: translateY(-8px) scale(1.05);
        border-color: var(--glass-border-2);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }
      
      /* Service Cards Modern */
      .service-card-modern {
        background: var(--glass-surface-1);
        backdrop-filter: blur(12px);
        border-radius: 24px;
        border: 1px solid var(--glass-border-1);
        padding: 2rem;
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        text-decoration: none;
        display: block;
      }
      
      .service-card-modern::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--electric-blue), var(--vibrant-purple), var(--emerald-green), var(--warm-gold));
        transform: scaleX(0);
        transition: transform 0.5s ease;
        border-radius: 24px 24px 0 0;
      }
      
      .service-card-modern::after {
        content: '';
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at 50% 50%, var(--electric-blue)/5 0%, transparent 70%);
        opacity: 0;
        transition: opacity 0.5s ease;
        pointer-events: none;
        border-radius: 24px;
      }
      
      .service-card-modern:hover::before {
        transform: scaleX(1);
      }
      
      .service-card-modern:hover::after {
        opacity: 1;
      }
      
      .service-card-modern:hover {
        transform: translateY(-12px) scale(1.02);
        border-color: var(--glass-border-2);
        background: var(--glass-surface-2);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
      }
      
      /* Advanced Micro-Interactions */
      .btn, .btn-primary, .btn-secondary, .btn-primary-gradient {
        position: relative;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .btn::before, .btn-primary::before, .btn-secondary::before, .btn-primary-gradient::before {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        transition: all 0.5s ease;
      }
      
      .btn:hover::before, .btn-primary:hover::before, .btn-secondary:hover::before, .btn-primary-gradient:hover::before {
        width: 300px;
        height: 300px;
      }
      
      /* Interactive Form Elements */
      .input-glass, .select-glass, .textarea-glass {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .input-glass:focus, .select-glass:focus, .textarea-glass:focus {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 212, 255, 0.15);
      }
      
      /* Card Hover Improvements */
      .job-card-modern, .card-product, .event-card {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .job-card-modern:hover, .card-product:hover, .event-card:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }
      
      /* Intelligent Link Animations */
      .nav-link, .category-link, .job-link, .company-link {
        position: relative;
        transition: all 0.3s ease;
      }
      
      .nav-link::after, .category-link::after, .job-link::after, .company-link::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, var(--electric-blue), var(--vibrant-purple));
        transition: width 0.3s ease;
      }
      
      .nav-link:hover::after, .category-link:hover::after, .job-link:hover::after, .company-link:hover::after {
        width: 100%;
      }
      
      /* Tag Pulse Animation */
      .tag, .badge-primary, .badge-success, .badge-warning {
        transition: all 0.3s ease;
      }
      
      .tag:hover, .badge-primary:hover, .badge-success:hover, .badge-warning:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      
      /* Stagger Animations for Lists */
      .jobs-list > *, .posts-list > *, .events-list > * {
        animation: slideInUp 0.6s ease forwards;
        opacity: 0;
        transform: translateY(30px);
      }
      
      .jobs-list > *:nth-child(1) { animation-delay: 0.1s; }
      .jobs-list > *:nth-child(2) { animation-delay: 0.2s; }
      .jobs-list > *:nth-child(3) { animation-delay: 0.3s; }
      .jobs-list > *:nth-child(4) { animation-delay: 0.4s; }
      .jobs-list > *:nth-child(5) { animation-delay: 0.5s; }
      
      @keyframes slideInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      /* Loading State Animations */
      .loading-shimmer {
        background: linear-gradient(90deg, 
          rgba(255, 255, 255, 0) 0%, 
          rgba(255, 255, 255, 0.2) 50%, 
          rgba(255, 255, 255, 0) 100%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
      }
      
      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }
      
      /* Ripple Animation for Buttons */
      @keyframes ripple-animation {
        0% {
          transform: scale(0);
          opacity: 1;
        }
        100% {
          transform: scale(2);
          opacity: 0;
        }
      }
      
      /* Enhanced Hover Effects for Navigation */
      .nav-link {
        position: relative;
        overflow: hidden;
      }
      
      .nav-link::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 50%;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, var(--electric-blue), var(--vibrant-purple));
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        transform: translateX(-50%);
      }
      
      .nav-link:hover::after {
        width: 100%;
      }
      
      .nav-link.active::after {
        width: 100%;
        background: linear-gradient(90deg, var(--electric-blue), var(--vibrant-purple));
      }
      
      /* Enhanced Card Interactions */
      .card-stunning, .service-card-modern, .stat-card-hero {
        cursor: pointer;
        will-change: transform;
      }
      
      /* Smooth Page Transitions */
      body {
        transition: background-color 0.3s ease, color 0.3s ease;
      }
      
      /* Enhanced Focus States for Better UX */
      .btn-hero-primary:focus,
      .btn-hero-secondary:focus {
        outline: 3px solid var(--electric-blue);
        outline-offset: 3px;
      }
      
      /* Loading State for Images */
      img {
        transition: opacity 0.3s ease;
      }
      
      img:not([src]),
      img[src=""] {
        opacity: 0;
      }
      
      /* Smooth Transitions for Theme Changes */
      * {
        transition: 
          background-color 0.3s ease,
          border-color 0.3s ease,
          color 0.3s ease,
          box-shadow 0.3s ease;
      }
      
      /* Mobile Navigation Styles */
      .nav-link-mobile {
        padding: 12px 16px;
        border-radius: 12px;
        font-weight: 500;
        color: var(--text-secondary);
        text-decoration: none;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
      }
      
      .nav-link-mobile::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 0;
        background: linear-gradient(135deg, var(--electric-blue) 0%, var(--vibrant-purple) 100%);
        transition: width 0.3s ease;
      }
      
      .nav-link-mobile:hover::before {
        width: 4px;
      }
      
      .nav-link-mobile:hover {
        color: var(--text-primary);
        background: var(--glass-surface-1);
        transform: translateX(8px);
      }
      
      .nav-link-mobile.active {
        background: linear-gradient(135deg, var(--electric-blue)/10 0%, var(--vibrant-purple)/10 100%);
        color: var(--electric-blue);
        border-left: 4px solid var(--electric-blue);
      }
      
      .nav-link-mobile.active::before {
        width: 4px;
      }
      
      /* Mobile Menu Animation */
      #mobile-menu {
        max-height: 0;
        overflow: hidden;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      #mobile-menu.show {
        max-height: 500px;
      }
      
      /* Enhanced Mobile Responsiveness */
      @media (max-width: 768px) {
        .hero-title {
          font-size: clamp(2.5rem, 8vw, 4rem) !important;
        }
        
        .btn-hero-primary,
        .btn-hero-secondary {
          min-width: 200px;
          padding: 14px 24px;
        }
        
        .stat-card-hero {
          padding: 1.5rem;
        }
        
        .service-card-modern {
          padding: 1.5rem;
        }
        
        .hero-float-1,
        .hero-float-2,
        .hero-float-3,
        .hero-float-4 {
          opacity: 0.5;
        }
      }
      
      /* Override for specific animations to prevent conflicts */
      .animate-slide-up,
      .animate-fade-in,
      .animate-pulse,
      .animate-bounce,
      .animate-float,
      [data-scroll-reveal],
      .hero-float-1,
      .hero-float-2,
      .hero-float-3,
      .hero-float-4 {
        transition: 
          opacity var(--duration-slow) var(--ease-out),
          transform var(--duration-slow) var(--ease-out) !important;
      }
      
      /* Smart Pagination */
      .pagination-modern a, .pagination-modern span {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .pagination-modern a:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 212, 255, 0.2);
      }
      
      /* Responsive Design */
      @media (max-width: 768px) {
        .hero-modern {
          padding: 60px 24px;
        }
        
        .card-stunning:hover {
          transform: translateY(-6px) scale(1.01);
        }
        
        .job-card-modern:hover, .card-product:hover, .event-card:hover {
          transform: translateY(-4px) scale(1.01);
        }
      }
      
      /* WCAG 2.1 Accessibility Enhancements */
      
      /* Enhanced Focus Indicators */
      .btn:focus, .btn-primary:focus, .btn-secondary:focus, .btn-primary-gradient:focus,
      .input-glass:focus, .select-glass:focus, .textarea-glass:focus,
      .nav-link:focus, .category-link:focus, .job-link:focus, .company-link:focus {
        outline: 3px solid var(--electric-blue);
        outline-offset: 2px;
        box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.3);
      }
      
      /* High Contrast Focus for Dark Mode */
      [data-theme="dark"] .btn:focus,
      [data-theme="dark"] .btn-primary:focus,
      [data-theme="dark"] .nav-link:focus {
        outline-color: var(--warm-gold);
        box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.3);
      }
      
      /* Screen Reader Only Content */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }
      
      .focus\:not-sr-only:focus {
        position: static;
        width: auto;
        height: auto;
        padding: inherit;
        margin: inherit;
        overflow: visible;
        clip: auto;
        white-space: normal;
      }
      
      /* Ensure adequate color contrast */
      .text-text-secondary {
        color: var(--text-secondary);
        /* Ensure minimum 4.5:1 contrast ratio */
      }
      
      /* Error states with ARIA support */
      .input-error {
        border-color: #dc2626;
        box-shadow: 0 0 0 1px #dc2626;
      }
      
      .input-error:focus {
        outline-color: #dc2626;
        box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.3);
      }
      
      /* High contrast mode support */
      @media (prefers-contrast: high) {
        .card-stunning, .glass-surface {
          border: 2px solid currentColor;
          background: var(--bg-primary);
        }
        
        .btn, .btn-primary, .btn-secondary {
          border: 2px solid currentColor;
        }
      }
      
      /* Touch target sizing (minimum 44px) */
      .btn, .btn-primary, .btn-secondary, .btn-primary-gradient,
      .nav-link, .theme-toggle, .language-toggle {
        min-height: 44px;
        min-width: 44px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }
      
      /* Keyboard navigation improvements */
      .nav-link:focus-visible,
      .btn:focus-visible,
      .btn-primary:focus-visible {
        transform: scale(1.05);
        z-index: 10;
      }
      
      /* Ensure text remains readable at 200% zoom */
      @media (min-resolution: 2dppx) {
        body {
          font-size: 1rem;
          line-height: 1.6;
        }
      }
      
      /* Motion preferences */
      @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
        
        .card-stunning:hover,
        .job-card-modern:hover,
        .btn:hover {
          transform: none !important;
        }
      }
      
      /* Color scheme preferences */
      @media (prefers-color-scheme: dark) {
        :root:not([data-theme="light"]) {
          --text-primary: #ffffff;
          --text-secondary: #d1d5db;
          --bg-primary: #111827;
          --bg-secondary: #1f2937;
        }
      }
      
      /* Simple Dark Mode CSS Override */
      html.dark {
        background-color: #1f2937 !important;
        color: #f9fafb !important;
      }
      
      html.dark body {
        background-color: #1f2937 !important;
        color: #f9fafb !important;
      }
      
      html.dark .bg-white {
        background-color: #374151 !important;
        color: #f9fafb !important;
      }
      
      html.dark .text-gray-900 {
        color: #f9fafb !important;
      }
      
      html.dark .text-gray-600 {
        color: #9ca3af !important;
      }
      
      html.dark .text-gray-500 {
        color: #9ca3af !important;
      }
      
      html.dark .border-gray-200 {
        border-color: #4b5563 !important;
      }
      
      html.dark .border-gray-300 {
        border-color: #4b5563 !important;
      }
    </style>
  </head>

  <body class="min-h-screen bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-colors duration-200">
    <!-- Modern Clean Navigation -->
    <nav class="glass-surface sticky top-0 z-50 border-b border-border-primary" role="navigation" aria-label="<%= t('navigation.main') %>">
      <div class="max-w-7xl mx-auto px-6">
        <div class="flex justify-between items-center h-16">
          <!-- Logo with Pacomien text -->
          <div class="flex items-center">
            <span class="text-2xl font-bold text-gray-900">Pacomien</span>
          </div>
          
          <!-- Navigation Links (Always Visible) -->
          <div class="flex items-center space-x-6 overflow-x-auto">
            <%= link_to t('navigation.home'), root_path, class: "nav-link #{'active' if request.path == '/' || request.path.start_with?('/en') && request.path.length <= 3 || request.path.start_with?('/fr') && request.path.length <= 3}" %>
            <%= link_to t('navigation.news'), posts_path, class: "nav-link #{'active' if request.path.include?('/posts')}" %>
            <%= link_to t('navigation.events'), events_path, class: "nav-link #{'active' if request.path.include?('/events')}" %>
            <%= link_to t('navigation.forum'), forum_categories_path, class: "nav-link #{'active' if request.path.include?('/forum')}" %>
            <%= link_to t('navigation.market'), products_path, class: "nav-link #{'active' if request.path.include?('/products')}" %>
            <%= link_to t('navigation.business'), businesses_path, class: "nav-link #{'active' if request.path.include?('/businesses')}" %>
            <%= link_to t('navigation.jobs'), jobs_path, class: "nav-link #{'active' if request.path.include?('/jobs')}" %>
            <%= link_to t('navigation.volunteer'), volunteer_opportunities_path, class: "nav-link #{'active' if request.path.include?('/volunteers')}" %>
            
            <!-- Authentication Links -->
            <% if user_signed_in? %>
              <%= link_to conversations_path, class: "nav-link #{'active' if request.path.include?('/conversations')} relative" do %>
                Messages
                <% if unread_messages_count > 0 %>
                  <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold animate-pulse">
                    <%= unread_messages_count > 9 ? '9+' : unread_messages_count %>
                  </span>
                <% end %>
              <% end %>
              <%= link_to t('navigation.profile'), user_path(current_user), class: "nav-link #{'active' if request.path.include?('/profile')}" %>
              <%= link_to "Logout", destroy_user_session_path, method: :delete, data: { turbo_method: :delete }, class: "nav-link" %>
            <% else %>
              <%= link_to t('navigation.sign_in'), new_user_session_path, class: "nav-link" %>
              <%= link_to t('navigation.sign_up'), new_user_registration_path, class: "nav-link" %>
            <% end %>
            
            <!-- Language Switcher -->
            <%= link_to url_for(locale: I18n.locale == :fr ? :en : :fr), class: "nav-link" do %>
              <%= I18n.locale == :fr ? "En" : "Fr" %>
            <% end %>
            
            <!-- Theme Toggle -->
            <button id="theme-toggle" class="nav-link" aria-label="Theme Toggle" onclick="toggleDarkMode()">
              <span id="theme-text"> Dark</span>
            </button>
          </div>
          
        </div>
        
        <!-- Mobile Menu (Now Hidden Since Navigation Is Always Visible) -->
        <div id="mobile-menu" class="hidden glass-surface-lg border-t border-glass-border mt-4">
          <div class="px-6 py-4 space-y-3">
            <%= link_to t('navigation.home'), root_path, class: "block nav-link-mobile #{'active' if request.path == '/'}" %>
            <%= link_to t('navigation.news'), posts_path, class: "block nav-link-mobile #{'active' if request.path.start_with?('/posts')}" %>
            <%= link_to t('navigation.events'), events_path, class: "block nav-link-mobile #{'active' if request.path.start_with?('/events')}" %>
            <%= link_to t('navigation.forum'), forum_categories_path, class: "block nav-link-mobile #{'active' if request.path.start_with?('/forum')}" %>
            <%= link_to t('navigation.market'), products_path, class: "block nav-link-mobile #{'active' if request.path.start_with?('/products')}" %>
            <%= link_to t('navigation.business'), businesses_path, class: "block nav-link-mobile #{'active' if request.path.start_with?('/businesses')}" %>
            <%= link_to t('navigation.jobs'), jobs_path, class: "block nav-link-mobile #{'active' if request.path.start_with?('/jobs')}" %>
            <%= link_to t('navigation.volunteer'), volunteer_opportunities_path, class: "block nav-link-mobile #{'active' if request.path.start_with?('/volunteers')}" %>
            
            <div class="border-t border-glass-border pt-4 mt-4">
              <% if user_signed_in? %>
                <%= link_to conversations_path, class: "block nav-link-mobile #{'active' if request.path.include?('/conversations')} relative" do %>
                  Messages
                  <% if unread_messages_count > 0 %>
                    <span class="absolute top-2 left-20 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold">
                      <%= unread_messages_count > 9 ? '9+' : unread_messages_count %>
                    </span>
                  <% end %>
                <% end %>
                <%= link_to t('navigation.profile'), user_path(current_user), class: "block nav-link-mobile #{'active' if request.path.include?('/profile')}" %>
              <% else %>
                <%= link_to t('navigation.sign_in'), new_user_session_path, class: "block nav-link-mobile mb-2" %>
                <%= link_to t('navigation.sign_up'), new_user_registration_path, class: "block bg-gradient-to-r from-electric-blue to-vibrant-purple text-white text-center py-3 rounded-lg font-semibold hover:shadow-lg transform transition-all duration-300" %>
              <% end %>
            </div>
            
            <!-- Mobile Language Switcher -->
            <div class="border-t border-glass-border pt-4 mt-4">
              <p class="text-sm font-medium text-text-secondary mb-2"><%= t('navigation.language') %></p>
              <div class="flex space-x-2">
                <%= link_to url_for(locale: :fr), class: "flex-1 text-center py-2 px-3 rounded-lg text-sm #{'bg-electric-blue/20 text-electric-blue border border-electric-blue/30' if I18n.locale == :fr} hover:bg-glass-surface-2 transition-all duration-300" do %>
                  Fr
                <% end %>
                <%= link_to url_for(locale: :en), class: "flex-1 text-center py-2 px-3 rounded-lg text-sm #{'bg-electric-blue/20 text-electric-blue border border-electric-blue/30' if I18n.locale == :en} hover:bg-glass-surface-2 transition-all duration-300" do %>
                  En
                <% end %>
              </div>
            </div>
          </div>
        </div>
          
          <!-- Empty User Actions Section -->
          <div class="flex items-center space-x-4">
          </div>
        </div>
      </div>
    </nav>

    <!-- Clean Notifications -->
    <% if notice %>
      <div class="fixed top-20 right-4 z-50 max-w-sm" role="alert" aria-live="polite">
        <div class="glass-card bg-green-50 border-green-200 px-4 py-3">
          <div class="flex items-center text-green-800">
            <span class="mr-2" aria-hidden="true"></span>
            <p class="text-sm font-medium"><%= notice %></p>
          </div>
        </div>
      </div>
    <% end %>

    <% if alert %>
      <div class="fixed top-20 right-4 z-50 max-w-sm" role="alert" aria-live="assertive">
        <div class="glass-card bg-red-50 border-red-200 px-4 py-3">
          <div class="flex items-center text-red-800">
            <span class="mr-2" aria-hidden="true"></span>
            <p class="text-sm font-medium"><%= alert %></p>
          </div>
        </div>
      </div>
    <% end %>

    <!-- Skip to main content link for screen readers -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-electric-blue text-white px-4 py-2 rounded z-50">
      <%= t('navigation.skip_to_content') %>
    </a>

    <!-- Main Content -->
    <main id="main-content" role="main" aria-label="<%= t('navigation.main_content') %>">
      <!-- Pacomien.jpg Image Above Page Titles -->
      <div class="bg-gradient-to-br from-gray-50 to-gray-100 py-8">
        <div class="max-w-7xl mx-auto px-6 text-center">
          <!-- Actual Pacomien.jpg image -->
          <div class="flex justify-center">
            <%= image_tag "Pacomien.jpg", alt: "Pacomien Logo", class: "w-48 h-48 object-contain shadow-2xl" %>
          </div>
        </div>
      </div>
      
      <%= yield %>
    </main>

    <!-- Minimal footer with only copyright -->
    <footer class="bg-white border-t border-gray-200 mt-16" role="contentinfo" aria-label="<%= t('footer.site_footer') %>">
      <div class="max-w-7xl mx-auto px-6 py-6">
        <div class="text-center">
          <p class="text-gray-600 text-sm">
             2025 <span class="font-bold text-gray-900">Pacomien</span>
          </p>
        </div>
      </div>
    </footer>

    <!-- 2025 Theme Toggle & Initialization Script -->
    <script>
      console.log('=== DARK MODE DEBUG ===');
      
      // Super simple dark mode toggle function
      function toggleDarkMode() {
        console.log('Toggle button clicked!');
        const html = document.documentElement;
        const isDark = html.classList.contains('dark');
        console.log('Current state - isDark:', isDark);
        
        if (isDark) {
          html.classList.remove('dark');
          localStorage.setItem('theme', 'light');
          console.log(' Switched to LIGHT mode');
        } else {
          html.classList.add('dark');
          localStorage.setItem('theme', 'dark');
          console.log(' Switched to DARK mode');
        }
        
        // Update button text
        const themeText = document.getElementById('theme-text');
        if (themeText) {
          themeText.textContent = isDark ? ' Dark' : ' Light';
          console.log('Updated button text to:', themeText.textContent);
        }
      }
      
      // Apply saved theme immediately
      (function() {
        const savedTheme = localStorage.getItem('theme');
        console.log('Saved theme:', savedTheme);
        if (savedTheme === 'dark') {
          document.documentElement.classList.add('dark');
          console.log('Applied dark mode from localStorage');
        }
      })();
      
      // Initialize button text on page load
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM loaded - setting up dark mode');
        
        const savedTheme = localStorage.getItem('theme');
        const themeText = document.getElementById('theme-text');
        
        if (savedTheme === 'dark' && themeText) {
          themeText.textContent = ' Light';
          console.log('Set initial button text to Light mode');
        } else if (themeText) {
          themeText.textContent = ' Dark';
          console.log('Set initial button text to Dark mode');
        }
        
        console.log('Dark mode initialization complete');
      });
      
      // More aggressive FOUC prevention
      
      // Show page immediately when script runs (critical path)
      (function() {
        function showPage() {
          document.body.classList.add('page-loaded');
        }
        
        // Show immediately if already loaded
        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', showPage);
        } else {
          showPage();
        }
        
        // Handle Turbo navigation
        document.addEventListener('turbo:load', showPage);
        
        // Hide during navigation with immediate effect
        document.addEventListener('turbo:before-visit', function() {
          document.body.style.opacity = '0';
          document.body.style.visibility = 'hidden';
        });
        
        // Ensure page shows after turbo navigation
        document.addEventListener('turbo:render', showPage);
      })();
    </script>
  </body>
</html>
