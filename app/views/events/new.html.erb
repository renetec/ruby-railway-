<% content_for :title, t('events.new.page_title', default: 'Create New Event') %>

<div class="min-h-screen bg-gradient-elegant">
  <div class="container-elegant">
    <!-- Header Section -->
    <div class="text-center mb-12">
      <h1 class="heading-hero text-primary-800 mb-4">
        <%= t('events.new.title', default: 'Create New Event') %>
      </h1>
      <p class="text-secondary-600 text-lg max-w-2xl mx-auto">
        <%= t('events.new.subtitle', default: 'Share your community event and bring people together') %>
      </p>
    </div>

    <!-- Main Form Card -->
    <div class="card-stunning max-w-4xl mx-auto">
      <%= form_with model: @event, local: true, multipart: true, class: "form-elegant" do |form| %>
        <% if @event.errors.any? %>
          <div class="alert-error">
            <div class="alert-error-icon">
              <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
              </svg>
            </div>
            <div>
              <h3 class="alert-error-title">
                <%= t('events.form.errors.header', 
                      count: @event.errors.count, 
                      default: pluralize(@event.errors.count, "error") + " prohibited this event from being saved:") %>
              </h3>
              <ul class="alert-error-list">
                <% @event.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
                <% end %>
              </ul>
            </div>
          </div>
        <% end %>

        <!-- Event Title -->
        <div class="form-group">
          <%= form.label :title, t('events.form.title', default: 'Event Title'), 
                         class: "form-label" %>
          <%= form.text_field :title, 
                             placeholder: t('events.form.title_placeholder', default: 'Enter a compelling event title'), 
                             class: "input-glass" %>
        </div>

        <!-- Category and Status Row -->
        <div class="form-row">
          <div class="form-group">
            <%= form.label :category, t('events.form.category', default: 'Category'), 
                           class: "form-label" %>
            <%= form.select :category, 
                           options_for_select(Event.categories.keys.map { |cat| [t("events.categories.#{cat}", default: cat.humanize), cat] }),
                           { prompt: t('events.form.category_prompt', default: 'Select a category') },
                           { class: "select-glass" } %>
          </div>
          <div class="form-group">
            <%= form.label :status, t('events.form.status', default: 'Status'), 
                           class: "form-label" %>
            <%= form.select :status, 
                           options_for_select([
                             [t('events.status.draft', default: 'Draft'), 'draft'], 
                             [t('events.status.published', default: 'Published'), 'published']
                           ]),
                           {},
                           { class: "select-glass" } %>
          </div>
        </div>

        <!-- Description -->
        <div class="form-group">
          <%= form.label :description, t('events.form.description', default: 'Event Description'), 
                         class: "form-label" %>
          <%= form.text_area :description, 
                            rows: 8, 
                            placeholder: t('events.form.description_placeholder', default: 'Describe your event in detail. What can attendees expect?'), 
                            class: "textarea-glass" %>
        </div>

        <!-- Date and Location Row -->
        <div class="form-row">
          <div class="form-group">
            <%= form.label :date, t('events.form.date_time', default: 'Date & Time'), 
                           class: "form-label" %>
            <%= form.datetime_local_field :date, class: "input-glass" %>
          </div>
          <div class="form-group">
            <%= form.label :location, t('events.form.location', default: 'Location'), 
                           class: "form-label" %>
            <%= form.text_field :location, 
                               placeholder: t('events.form.location_placeholder', default: 'Where will this event take place?'), 
                               class: "input-glass" %>
          </div>
        </div>

        <!-- Capacity and Price Row -->
        <div class="form-row">
          <div class="form-group">
            <%= form.label :capacity, t('events.form.capacity', default: 'Maximum Attendees'), 
                           class: "form-label" %>
            <%= form.number_field :capacity, 
                                 min: 1, 
                                 placeholder: t('events.form.capacity_placeholder', default: 'e.g., 50'), 
                                 class: "input-glass" %>
            <p class="form-hint">
              <%= t('events.form.capacity_hint', default: 'Leave blank for unlimited capacity') %>
            </p>
          </div>
          <div class="form-group">
            <%= form.label :price, t('events.form.price', default: 'Price ($)'), 
                           class: "form-label" %>
            <%= form.number_field :price, 
                                 min: 0, 
                                 step: 0.01, 
                                 placeholder: "0.00", 
                                 class: "input-glass" %>
            <p class="form-hint">
              <%= t('events.form.price_hint', default: 'Leave blank or 0 for free events') %>
            </p>
          </div>
        </div>

        <!-- Image Upload -->
        <div class="form-group">
          <%= form.label :images, t('events.form.images', default: 'Event Images'), 
                         class: "form-label" %>
          <div class="file-upload-area">
            <%= form.file_field :images, 
                               multiple: true, 
                               accept: "image/*", 
                               class: "file-input" %>
            <div class="file-upload-content">
              <svg class="file-upload-icon" fill="none" stroke="currentColor" viewBox="0 0 48 48">
                <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              <p class="file-upload-title">
                <%= t('events.form.images_upload_title', default: 'Click to upload or drag and drop') %>
              </p>
              <p class="file-upload-subtitle">
                <%= t('events.form.images_upload_subtitle', default: 'PNG, JPG, GIF up to 10MB each (multiple files allowed)') %>
              </p>
            </div>
          </div>
        </div>

        <!-- Action Buttons -->
        <div class="form-actions">
          <%= form.submit t('events.form.create_button', default: 'Create Event'), 
                         class: "btn-primary-gradient" %>
          <%= link_to t('common.cancel', default: 'Cancel'), 
                     events_path, 
                     class: "btn-secondary" %>
        </div>
      <% end %>
    </div>

    <!-- Additional Help Section -->
    <div class="card-glass max-w-2xl mx-auto mt-8 text-center">
      <h3 class="text-lg font-semibold text-primary-700 mb-3">
        <%= t('events.new.tips_title', default: 'Tips for a Great Event') %>
      </h3>
      <div class="grid md:grid-cols-2 gap-4 text-sm text-secondary-600">
        <div class="flex items-start space-x-2">
          <span class="text-accent-500 mt-0.5"></span>
          <span><%= t('events.new.tip_1', default: 'Use clear, descriptive titles') %></span>
        </div>
        <div class="flex items-start space-x-2">
          <span class="text-accent-500 mt-0.5"></span>
          <span><%= t('events.new.tip_2', default: 'Add engaging photos') %></span>
        </div>
        <div class="flex items-start space-x-2">
          <span class="text-accent-500 mt-0.5"></span>
          <span><%= t('events.new.tip_3', default: 'Provide exact location details') %></span>
        </div>
        <div class="flex items-start space-x-2">
          <span class="text-accent-500 mt-0.5"></span>
          <span><%= t('events.new.tip_4', default: 'Set realistic time expectations') %></span>
        </div>
      </div>
    </div>
  </div>
</div>