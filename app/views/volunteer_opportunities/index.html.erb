<!-- Volunteer Opportunities - 2 Column Layout -->
<div class="max-w-6xl mx-auto px-4 py-8">
  <!-- Page Header with Logo -->
  <%= render 'shared/page_header_with_logo', 
      title: "Opportunit√©s de B√©n√©volat",
      subtitle: "D√©couvrez des moyens de contribuer √† votre communaut√©" %>

  <!-- Action Buttons -->
  <% if user_signed_in? %>
    <div class="flex flex-col sm:flex-row gap-4 mb-8 justify-center">
      <%= link_to "üìù #{t('actions.create_opportunity')}", new_volunteer_opportunity_path, 
                  class: "px-6 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg font-semibold" %>
      <%= link_to "üìã Mes candidatures", my_applications_volunteer_opportunities_path, 
                  class: "px-6 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-semibold" %>
      <%= link_to "üìä Mes opportunit√©s", my_opportunities_volunteer_opportunities_path, 
                  class: "px-6 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-semibold" %>
    </div>
  <% end %>

  <!-- Filters Section -->
  <div class="flex flex-col md:flex-row gap-4 mb-8 justify-center">
    <select class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
      <option><%= t('dropdowns.category') %></option>
      <option><%= t('dropdowns.education') %></option>
      <option><%= t('dropdowns.environment') %></option>
      <option><%= t('dropdowns.social') %></option>
      <option><%= t('dropdowns.health') %></option>
      <option><%= t('dropdowns.culture') %></option>
    </select>
    <select class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100">
      <option><%= t('dropdowns.time_required') %></option>
      <option><%= t('dropdowns.one_time') %></option>
      <option><%= t('dropdowns.regular') %></option>
      <option><%= t('dropdowns.flexible') %></option>
    </select>
    <button class="px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700">
      üîÑ <%= t('actions.refresh') %>
    </button>
  </div>

  <!-- 2-Column Opportunities Grid -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <!-- Opportunity 1 -->
    <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="openModal('modal-1')">
      <div class="flex gap-4">
        <div class="w-24 h-24 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center flex-shrink-0">
          <span class="text-3xl">üìö</span>
        </div>
        <div class="flex-1">
          <div class="flex justify-between items-start mb-2">
            <span class="bg-green-500 text-white px-2 py-1 rounded text-xs">√âducation</span>
            <span class="text-sm text-gray-500 dark:text-gray-400">Il y a 1h</span>
          </div>
          <h3 class="font-bold text-lg mb-1 text-gray-900 dark:text-gray-100">Aide aux devoirs - √âcole primaire</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Recherchons b√©n√©voles pour accompagner les enfants...</p>
          <div class="flex justify-between items-center">
            <span class="text-xs text-gray-500 dark:text-gray-400">Par √âcole Centrale</span>
            <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="event.stopPropagation(); openModal('modal-1')">
              üí¨ Postuler
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Opportunity 2 -->
    <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="openModal('modal-2')">
      <div class="flex gap-4">
        <div class="w-24 h-24 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center flex-shrink-0">
          <span class="text-3xl">üå±</span>
        </div>
        <div class="flex-1">
          <div class="flex justify-between items-start mb-2">
            <span class="bg-blue-500 text-white px-2 py-1 rounded text-xs">Environnement</span>
            <span class="text-sm text-gray-500 dark:text-gray-400">Il y a 3h</span>
          </div>
          <h3 class="font-bold text-lg mb-1 text-gray-900 dark:text-gray-100">Nettoyage du parc municipal</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Journ√©e de nettoyage du parc avec √©quipement fourni...</p>
          <div class="flex justify-between items-center">
            <span class="text-xs text-gray-500 dark:text-gray-400">Par Mairie Locale</span>
            <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="event.stopPropagation(); openModal('modal-2')">
              üí¨ Postuler
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Opportunity 3 -->
    <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="openModal('modal-3')">
      <div class="flex gap-4">
        <div class="w-24 h-24 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center flex-shrink-0">
          <span class="text-3xl">üë•</span>
        </div>
        <div class="flex-1">
          <div class="flex justify-between items-start mb-2">
            <span class="bg-purple-500 text-white px-2 py-1 rounded text-xs">Social</span>
            <span class="text-sm text-gray-500 dark:text-gray-400">Il y a 5h</span>
          </div>
          <h3 class="font-bold text-lg mb-1 text-gray-900 dark:text-gray-100">Accompagnement personnes √¢g√©es</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Visites et accompagnement pour rompre l'isolement...</p>
          <div class="flex justify-between items-center">
            <span class="text-xs text-gray-500 dark:text-gray-400">Par Aide Seniors</span>
            <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="event.stopPropagation(); openModal('modal-3')">
              üí¨ Postuler
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Opportunity 4 -->
    <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="openModal('modal-4')">
      <div class="flex gap-4">
        <div class="w-24 h-24 bg-red-100 dark:bg-red-900 rounded-lg flex items-center justify-center flex-shrink-0">
          <span class="text-3xl">ü©∫</span>
        </div>
        <div class="flex-1">
          <div class="flex justify-between items-start mb-2">
            <span class="bg-red-500 text-white px-2 py-1 rounded text-xs">Sant√©</span>
            <span class="text-sm text-gray-500 dark:text-gray-400">Il y a 8h</span>
          </div>
          <h3 class="font-bold text-lg mb-1 text-gray-900 dark:text-gray-100">Collecte de sang - Urgence</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Aide √† l'organisation de la collecte de sang...</p>
          <div class="flex justify-between items-center">
            <span class="text-xs text-gray-500 dark:text-gray-400">Par Croix Rouge</span>
            <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="event.stopPropagation(); openModal('modal-4')">
              üí¨ Postuler
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Opportunity 5 -->
    <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="openModal('modal-5')">
      <div class="flex gap-4">
        <div class="w-24 h-24 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex items-center justify-center flex-shrink-0">
          <span class="text-3xl">üé≠</span>
        </div>
        <div class="flex-1">
          <div class="flex justify-between items-start mb-2">
            <span class="bg-yellow-500 text-white px-2 py-1 rounded text-xs">Culture</span>
            <span class="text-sm text-gray-500 dark:text-gray-400">Il y a 12h</span>
          </div>
          <h3 class="font-bold text-lg mb-1 text-gray-900 dark:text-gray-100">Festival des Arts - Assistance</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Aide √† l'organisation du festival culturel...</p>
          <div class="flex justify-between items-center">
            <span class="text-xs text-gray-500 dark:text-gray-400">Par Centre Culturel</span>
            <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="event.stopPropagation(); openModal('modal-5')">
              üí¨ Postuler
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Opportunity 6 -->
    <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer" onclick="openModal('modal-6')">
      <div class="flex gap-4">
        <div class="w-24 h-24 bg-indigo-100 dark:bg-indigo-900 rounded-lg flex items-center justify-center flex-shrink-0">
          <span class="text-3xl">üêï</span>
        </div>
        <div class="flex-1">
          <div class="flex justify-between items-start mb-2">
            <span class="bg-indigo-500 text-white px-2 py-1 rounded text-xs">Animaux</span>
            <span class="text-sm text-gray-500 dark:text-gray-400">Il y a 1j</span>
          </div>
          <h3 class="font-bold text-lg mb-1 text-gray-900 dark:text-gray-100">Refuge pour animaux - Soins</h3>
          <p class="text-gray-600 dark:text-gray-400 text-sm mb-2">Aide aux soins et promenades des animaux...</p>
          <div class="flex justify-between items-center">
            <span class="text-xs text-gray-500 dark:text-gray-400">Par Refuge des Amis</span>
            <button class="text-blue-600 hover:text-blue-800 text-sm font-medium" onclick="event.stopPropagation(); openModal('modal-6')">
              üí¨ Postuler
            </button>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- Detail Modal -->
<div id="detail-modal" class="fixed inset-0 z-50 hidden items-center justify-center bg-black bg-opacity-50">
  <div class="bg-white dark:bg-gray-800 max-w-2xl w-full mx-4 rounded-lg overflow-hidden max-h-[80vh] overflow-y-auto">
    <div class="p-6">
      <!-- Modal Header -->
      <div class="flex justify-between items-start mb-6">
        <div id="modal-category" class="bg-blue-500 text-white px-4 py-2 rounded-full text-sm font-medium"></div>
        <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 text-2xl font-bold">√ó</button>
      </div>
      
      <!-- Modal Content -->
      <div class="flex gap-6 mb-6">
        <div id="modal-image" class="w-32 h-32 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center flex-shrink-0">
          <span id="modal-emoji" class="text-4xl"></span>
        </div>
        <div class="flex-1">
          <h2 id="modal-title" class="text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4"></h2>
          <p id="modal-description" class="text-gray-600 dark:text-gray-400 mb-4"></p>
          <div class="flex justify-between items-center">
            <div id="modal-author" class="text-sm text-gray-500 dark:text-gray-400"></div>
            <div id="modal-time" class="text-sm text-gray-500 dark:text-gray-400"></div>
          </div>
        </div>
      </div>
      
      <!-- Application Form -->
      <div class="border-t dark:border-gray-600 pt-6">
        <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100 mb-4">Postuler pour cette opportunit√©</h3>
        <form class="space-y-4" onsubmit="handleApplicationSubmit(event)">
          <div>
            <label class="block text-gray-700 dark:text-gray-300 font-medium mb-2"><%= t('forms.your_name') %></label>
            <input type="text" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="<%= t('common.your_full_name') %>" required>
          </div>
          <div>
            <label class="block text-gray-700 dark:text-gray-300 font-medium mb-2"><%= t('forms.motivation') %></label>
            <textarea rows="4" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:border-blue-500 focus:outline-none resize-none" placeholder="<%= t('common.explain_motivation') %>" required></textarea>
          </div>
          <div>
            <label class="block text-gray-700 dark:text-gray-300 font-medium mb-2"><%= t('forms.availability') %></label>
            <input type="text" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-100 rounded-lg focus:border-blue-500 focus:outline-none" placeholder="<%= t('common.availability') %>" required>
          </div>
          <div class="flex gap-4 pt-4">
            <button type="submit" class="bg-green-500 hover:bg-green-600 text-white flex-1 py-3 px-6 rounded-lg font-semibold">
              üì§ <%= t('actions.send_application') %>
            </button>
            <button type="button" onclick="closeModal()" class="bg-gray-500 hover:bg-gray-600 text-white py-3 px-6 rounded-lg font-semibold">
              <%= t('actions.close') %>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<script>
// Modal data for volunteer opportunities
const modalData = {
  'modal-1': {
    category: '√âducation',
    title: 'Aide aux devoirs - √âcole primaire',
    description: 'Nous recherchons des b√©n√©voles pour accompagner les enfants de CE1 et CE2 dans leurs devoirs. S√©ances de 2h, 2 fois par semaine. Formation fournie pour les techniques p√©dagogiques adapt√©es. Une exp√©rience enrichissante pour aider les enfants en difficult√©.',
    author: 'Par √âcole Centrale',
    time: 'Il y a 1h',
    emoji: 'üìö'
  },
  'modal-2': {
    category: 'Environnement',
    title: 'Nettoyage du parc municipal',
    description: 'Grande journ√©e de nettoyage du parc municipal le samedi 3 ao√ªt. √âquipement fourni : gants, sacs poubelles, pinces ramasse-d√©chets. Petit-d√©jeuner et d√©jeuner offerts. Action citoyenne pour pr√©server notre environnement local.',
    author: 'Par Mairie Locale',
    time: 'Il y a 3h',
    emoji: 'üå±'
  },
  'modal-3': {
    category: 'Social',
    title: 'Accompagnement personnes √¢g√©es',
    description: 'Visites hebdomadaires √† domicile ou en EHPAD pour rompre l\'isolement des personnes √¢g√©es. Conversations, jeux de soci√©t√©, petites sorties. Formation d\'accompagnement social propos√©e. Engagement minimum 6 mois.',
    author: 'Par Aide Seniors',
    time: 'Il y a 5h',
    emoji: 'üë•'
  },
  'modal-4': {
    category: 'Sant√©',
    title: 'Collecte de sang - Urgence',
    description: 'Aide √† l\'organisation de la collecte de sang dans notre centre. Accueil des donneurs, distribution de collations, assistance administrative. Formation sur la s√©curit√© transfusionnelle. Besoin urgent de volontaires qualifi√©s.',
    author: 'Par Croix Rouge',
    time: 'Il y a 8h',
    emoji: 'ü©∫'
  },
  'modal-5': {
    category: 'Culture',
    title: 'Festival des Arts - Assistance',
    description: 'Assistance pour l\'organisation du festival culturel annuel. Montage/d√©montage des stands, accueil du public, aide aux artistes. Festival de 3 jours avec concerts, expositions et ateliers. Ambiance conviviale garantie !',
    author: 'Par Centre Culturel',
    time: 'Il y a 12h',
    emoji: 'üé≠'
  },
  'modal-6': {
    category: 'Animaux',
    title: 'Refuge pour animaux - Soins',
    description: 'Aide aux soins quotidiens des animaux abandonn√©s : nettoyage des enclos, nourrissage, promenades des chiens, socialisation des chats. Exp√©rience avec les animaux souhait√©e. Formation aux premiers secours animaliers propos√©e.',
    author: 'Par Refuge des Amis',
    time: 'Il y a 1j',
    emoji: 'üêï'
  }
};

// Modal functions
function openModal(modalId) {
  const data = modalData[modalId];
  if (data) {
    document.getElementById('modal-category').textContent = data.category;
    document.getElementById('modal-title').textContent = data.title;
    document.getElementById('modal-description').textContent = data.description;
    document.getElementById('modal-author').textContent = data.author;
    document.getElementById('modal-time').textContent = data.time;
    document.getElementById('modal-emoji').textContent = data.emoji;
    
    // Set category color based on type
    const categoryElement = document.getElementById('modal-category');
    const categoryColors = {
      '√âducation': 'bg-green-500',
      'Environnement': 'bg-blue-500', 
      'Social': 'bg-purple-500',
      'Sant√©': 'bg-red-500',
      'Culture': 'bg-yellow-500',
      'Animaux': 'bg-indigo-500'
    };
    
    // Reset classes and add appropriate color
    categoryElement.className = `text-white px-4 py-2 rounded-full text-sm font-medium ${categoryColors[data.category] || 'bg-blue-500'}`;
    
    document.getElementById('detail-modal').style.display = 'flex';
    document.getElementById('detail-modal').classList.remove('hidden');
  }
}

function closeModal() {
  document.getElementById('detail-modal').style.display = 'none';
  document.getElementById('detail-modal').classList.add('hidden');
}

function handleApplicationSubmit(event) {
  event.preventDefault();
  alert('Candidature envoy√©e! L\'organisation vous r√©pondra bient√¥t.');
  closeModal();
}

// Close modal when clicking outside
document.getElementById('detail-modal').addEventListener('click', function(e) {
  if (e.target === document.getElementById('detail-modal')) {
    closeModal();
  }
});
</script>